---
title: '2018GDCPC-2'
date: 2018-03-10 17:17:17
tags: 2018GDCPC
---

SCAU 2018省赛个人排位赛 #2 题解

[比赛地址](https://vjudge.net/contest/215472)

A  博弈
- 题意：给一个n\*m的01矩阵，alice和bob轮流操作，每次选择一个值为1的点(x, y)，反转(x, y)－(n, m)即整个右下角矩阵的值，无法继续操作的选手输。
- 题解：
1. 考虑右下角(n,m)这个点的值为1，先手胜。先手只翻转该点的值变成0，后手无论选择其它任意点操作，都会导致(n,m)的值变回1，那么先手继续翻转该点的值，直至后手没有点可以选择。
2. 考虑右下角(n,m)这个点的值为0，后手胜。先手选择任意点操作，都会导致(n,m)值变成0，那么后手翻转该值，直至先手没有点可以选择。

B dp＋贪心
- 题意：给一个长度为n的序列q，为了使得前k个数的和最大，你可以操作最多s次，每次操作可以交换一对相邻的数，问最大的和是多少。
- 题解：二维背包的变形，使得前k个数和发生改变，实质是在前k个数和后n-k个数里面，分别选择x个数进行交换，假设选择了下标为a1<a2<...<ax<=k<ax+1<...<a2x-1<a2x的2x个数进行交换，那么必然是(ax,ax+1), (a2,a2x-1),(a1,a2x)这样进行交换消耗的操作数最少.
  另外，由冒泡排序可知，最多的交换次数，不会超过n^2
  设`dp[i][j][m]`表示，到i个数，前k个数中选择的数比后n-k个数中选择的数多j个，消耗了m次操作，前k个数的最大和。
```
当i <= k时，若选择第i 个数，则将第i 个数移到k的位置
	dp[i][j][m] = max{dp[i-1][j][m], dp[i - 1][j - 1][m - (k - i)]}.
当i > k时，若选择第i个数，则将第i个数移到k的位置
	dp[i][j][m] = max{dp[i - 1][j][m], dp[i - 1][j + 1][m - (i - k)]}.
```

C 概率
- 题意：给一个有n个面的骰子，摇到任意面的概率相等，问每个面都被摇到需要的期望次数是多少。
- 题解：考虑现在剩下i个面没摇到过，那么摇到一个新面的概率是i/n，期望次数为n/i。
```
   ans ＝ n/n ＋ n/(n - 1) + … + n/1
            = n*(1 + 1/2 + … + 1/n)
```

D 数论
- 题意：求一个最小的数n，使得 n! 包含Q个后导0
- 题解：
  n! 包含多少个0，跟n!分解质因数后包含多少个2和5决定，可以知道包含2一定不比5少，因此只需算包含5的个数即可。n/(5^k)可以得出1～n里面有多少个5^k的倍数，计算sum = n/5 + n/5^2 +…+ n/5^k，即为n!中有多少个质因子5。
  随着n增大，n!中质因子5的个数会增加，因此只需二分n，计算n是否含有Q个后导0即可

G 数据结构
- 题意： 给一个长度为n的序列a，每次询问区间(l, r)中数值相同的数最短距离是多少。
- 题解：
  离线：维护一棵线段树和一个map，到ai时，可以得出最近的aj ＝ ai(j < i)，用dist ＝ j － i更新线段树中1～j的值(取最小值)，回答r ＝ i的询问。

  在线：O(n\*sqrt(n)\*log(sqrt(n))), 有更优的解法可以提出并科普。
  得出两个序列b和d，bi表示前一个跟ai相同的数的位置，di ＝ i － ai，将bi分块维护。
  块内根据bi进行排序，再从后到前得出一个序列c，ci表示后缀中最小的di。
  每次询问，找出l,r区间的块，对每个块二分出bi >＝ l 的位置k，取ck中的最小值
